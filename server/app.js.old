// import express from 'express';
// import 'express-async-errors';
// import cors from 'cors';
// import morgan from 'morgan';
// import helmet from 'helmet';
// import tweetsRouter from './router/tweets.js';

// const app = express();

// app.use(express.json());
// app.use(helmet());
// app.use(cors());
// app.use(morgan('tiny'));

// app.use('tweets', tweetsRouter);
// app.use((req, res, next) => {
//   res.sendStatus(404);
// });

// app.use((error, req, res, next) => {
//   console.error(error);
//   res.sendStatus(500);
// });

// // const data = JSON.parse(tweets);

// // app.get('/tweets', (req, res) => {
// //   if (req.query.username) {
// //     const filteredTweets = tweets.filter((tweet) => tweet.username === req.query.username);
// //     res.status(200).send(filteredTweets);
// //   } else {
// //     res.status(200).send(JSON.parse(tweets));
// //   }
// // });

// // app.get('/tweets/:id', (req, res) => {
// //   console.log(req.params);
// //   const filteredTweets = tweets.filter((tweet) => tweet.id === Number(req.params.id));
// //   res.status(200).json(...filteredTweets);
// // });

// // app.post('/tweets', (req, res) => {
// //   const body = req.body;
// //   tweets.push({
// //     id: tweets.length,
// //     text: body.text,
// //     createdAt: new Date(),
// //     name: body.name,
// //     username: body.username,
// //     url: body.url ? body.url : null,
// //   });
// //   res.status(201).json(tweets[tweets.length - 1]);
// // });

// // app.put('/tweets/:id', (req, res) => {
// //   const body = req.body;
// //   const id = Number(req.params.id);
// //   tweets.forEach((tweet) => {
// //     if (tweet.id === id) {
// //       tweet.text = body.text;
// //     }
// //   });
// //   const updatedTweet = tweets.filter((tweet) => {
// //     tweet.id === id;
// //   });
// //   console.log(updatedTweet);
// //   res.status(200).json(...updatedTweet);
// // });

// // app.delete('/twwets/:id', (req, res) => {
// //   const id = req.params.id;

// //   res.status(204);
// // });

// app.listen(8080);

import express from 'express';
import 'express-async-errors';
import cors from 'cors';
import morgan from 'morgan';
import helmet from 'helmet';
import tweetsRouter from './router/tweets.js';

const app = express();

app.use(express.json());
app.use(helmet());
app.use(cors());
app.use(morgan('tiny'));

app.use('/tweets', tweetsRouter);

app.use((req, res, next) => {
  res.sendStatus(404);
});

app.use((error, req, res, next) => {
  console.error(error);
  res.sendStatus(500);
});
app.listen(8080);
